<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (15) on Sun Jan 30 13:20:53 UTC 2022 -->
<title>org.jgrapes.core</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2022-01-30">
<meta name="description" content="declaration: package: org.jgrapes.core">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<p>@Version("${api_version}")
</p>
<h1 title="Package" class="title">Package&nbsp;org.jgrapes.core</h1>
</div>
<section class="package-description" id="package.description">
<div class="block">Defines the interfaces and classes that provide
the core functionality of the JGrapes event driven component framework.<ul>
<li><a href="#components">Components</a></li>
<li><a href="#events">Events</a></li>
<li><a href="#event-handlers">Event Handlers</a></li>
<li><a href="#channels">Channels</a></li>
<li><a href="#event-processors">Event Processors</a></li>
<li><a href="#logging">Logging</a></li>
</ul>
<h2 id="components"><a href="#components" id="components">Components</a></h2>
<p>A JGrapes application consists of a tree of components that interact
using events.</p>
<p><img src="ComponentTree.svg" alt="Sample component tree" /></p>
<p>Components can be defined in two ways. Classes can implement the interface
<a href="ComponentType.html" title="interface in org.jgrapes.core"><code>ComponentType</code></a> and provide a special attribute
that allows them to access their component manager
(see the description of the interface <a href="ComponentType.html" title="interface in org.jgrapes.core"><code>ComponentType</code></a>
for details). Alternatively, classes
can inherit from <a href="Component.html" title="class in org.jgrapes.core"><code>Component</code></a>. This base class
implements <a href="ComponentType.html" title="interface in org.jgrapes.core"><code>ComponentType</code></a> and also provides the
component manager for the component.</p>
<p><img src="Components.svg" alt="Example" /></p>
<p>The <a href="Manager.html" title="interface in org.jgrapes.core"><code>Manager</code></a> interface enables the components
to access the functions of the framework. This includes methods
for manipulating the tree structure
(<a href="Manager.html#attach(T)"><code>Manager.attach(ComponentType)</code></a>,
<a href="Manager.html#detach()"><code>Manager.detach()</code></a> etc.) and methods
for sending and handling events
(<a href="Manager.html#fire(org.jgrapes.core.Event,org.jgrapes.core.Channel...)"><code>Manager.fire(Event, Channel...)</code></a>,
<a href="Manager.html#addHandler(java.lang.reflect.Method,org.jgrapes.core.HandlerScope,int)"><code>Manager.addHandler(Method, HandlerScope, int)</code></a>).</p>
<h2 id="events"><a href="#events" id="events">Events</a></h2>
<p>Events are objects that trigger activities of the components that
handle them. Because components are usually only interested in certain
kinds of triggers, events implement the <a href="Eligible.html" title="interface in org.jgrapes.core"><code>Eligible</code></a>
interface that enables the user to obtain an event&rsquo;s kind (as criterion)
and to filter events according to their kind.</p>
<p><img src="Events.svg" alt="Events" /></p>
<p>As implemented in the base class <a href="Event.html" title="class in org.jgrapes.core"><code>Event</code></a>, the
kind of an event is represented by its Java class. E.g. a
<a href="events/Started.html" title="class in org.jgrapes.core.events"><code>Started</code></a> event is an instance
of class <code>org.jgrapes.core.events.Started</code> and its kind
(obtainable from <a href="Event.html#defaultCriterion()"><code>Event.defaultCriterion()</code></a>)
is <code>org.jgrapes.core.events.Started.class</code>.</p>
<p>Especially when building small sample applications, some programmers
prefer to use a name for representing the kind of an event. The core
package supports this by providing the <a href="NamedEvent.html" title="class in org.jgrapes.core"><code>NamedEvent</code></a>.
This class overrides <a href="Event.html#defaultCriterion()"><code>Event.defaultCriterion()</code></a>
and <a href="Event.html#isEligibleFor(java.lang.Object)"><code>Event.isEligibleFor(Object)</code></a> so that a
simple string is used to represent and match the event&rsquo;s kind.</p>
<h2 id="event-handlers"><a href="#event-handlers" id="event-handlers">Event Handlers</a></h2>
<p>Event handlers are methods that are invoked by the framework.
These methods have return type <code>void</code> and can have zero to
two parameters. If specified, the first parameter must be of type
<a href="Event.html" title="class in org.jgrapes.core"><code>Event</code></a> (or, as usual, a subtype of
<code>Event</code>). The purpose of the second (optional) parameter will be
explained in the next section.</p>
<p>Event handlers are usually registered with the framework using
an annotation. The standard annotation for registering event handlers
is <a href="annotation/Handler.html" title="annotation in org.jgrapes.core.annotation"><code>Handler</code></a>. See its definition
for usage examples. If special needs arise,
other annotations for registering handlers may be defined using the
<a href="annotation/HandlerDefinition.html" title="annotation in org.jgrapes.core.annotation"><code>HandlerDefinition</code></a>.</p>
<p>If the information required for using the handler annotation is not
(completely) available at compile time, handler methods can also be added
at runtime using
<a href="Manager.html#addHandler(java.lang.reflect.Method,org.jgrapes.core.HandlerScope,int)"><code>Manager.addHandler(Method, HandlerScope, int)</code></a>.</p>
<h2 id="channels"><a href="#channels" id="channels">Channels</a></h2>
<p>Because events are usually only relevant for a subset of the application&rsquo;s
components, events are fired on so called channels. Event handlers
are attached to one ore more of those channels.</p>
<p>In order for objects to be usable as channels, they must implement the
<a href="Channel.html" title="interface in org.jgrapes.core"><code>Channel</code></a> interface, which implies implementing
the <a href="Eligible.html" title="interface in org.jgrapes.core"><code>Eligible</code></a> interface. The core package
provides two predefined types of channels: the
<a href="ClassChannel.html" title="class in org.jgrapes.core"><code>ClassChannel</code></a>, that uses a Java class for
identification and the <a href="NamedChannel.html" title="class in org.jgrapes.core"><code>NamedChannel</code></a>, that uses
a name (String) for identification.</p>
<p>A third group of channels is implicitly provided by the
<a href="Component.html" title="class in org.jgrapes.core"><code>Component</code></a>s, which implement the
<a href="Channel.html" title="interface in org.jgrapes.core"><code>Channel</code></a> interface as well. This means that
every component can be used as a channel.</p>
<p>From a conceptional point of view, components fire events on one or
more channels, and the channels forward the events to all (0 to many)
interested event handlers (in reality, channels are only used as
identifiers in event management).
See <a href="Manager.html#fire(org.jgrapes.core.Event,org.jgrapes.core.Channel...)"><code>Manager.fire(Event, Channel...)</code></a> for
a description of how to choose channels when fireing an event.</p>
<p><img src="Component-Channel.svg" alt="Component-Channel interaction" /></p>
<p>A handler is considered to be interested in an event if it has
registered with one of the channels that the event is fired on
and the event is of a type that the handler (annotation) has
specified as being processed by the handler (see above)<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup>.</p>
<p>The channels that an event has been fired on are made available
when the event is passed to an event handler by
<a href="Event.html#channels()"><code>Event.channels()</code></a>. In some use cases, an
event handler has to perform an action for each of the channels. To
simplify this, an event handler may specify a second parameter
of type <a href="Channel.html" title="interface in org.jgrapes.core"><code>Channel</code></a>. In this case, the handler
is invoked by the framework once for each channel that the event
was fired on. If the type of the second parameter is a subtype
of <a href="Channel.html" title="interface in org.jgrapes.core"><code>Channel</code></a>, it is invoked only if the
paramter is assignable from the actual channel.</p>
<h2 id="event-processors"><a href="#event-processors" id="event-processors">Event Processors</a></h2>
<p>&hellip;</p>
<h2 id="logging"><a href="#logging" id="logging">Logging</a></h2>
<p>The package supports some specific (java.util) logging settings.</p>
 <dl>
   <dt>org.jgrapes.core.handlerTracking.level</dt>
   <dd>If set to FINE, causes events and their handlers to be logged
   before the handler is invoked. If set to FINER additionally 
   causes events without any handler to be logged and if set to 
   FINEST also logs the result of invoking a handler
   (the additional logging is done with log level
   FINE, just as the logging of the invocations). Enabling the
   invocation logging involves some performance penalty because additional
   information (not required for normal operation) has to be maintained.</dd>
   <dt>org.jgrapes.core.generatorTracking.level</dt>
   <dd>If set to FINE, the 
   event generators added and removed are tracked (usually, they are 
   only counted). Differences between the counted and the tracked
   generators are reported as errors when
   <a href="Components.html#awaitExhaustion()"><code>Components.awaitExhaustion()</code></a> is invoked.
   In addition, the generators blocking the exhaustion are reported.
   If set to FINEST, addition and removal of generators is
   reported as well.
   </dd>
   <dt>org.jgrapes.core.classNames.level</dt>
   <dd>If set to FINER, class names are converted to fully
   qualified names in toString() methods.</dd>
 </dl>
<div class="footnotes">
<hr />
<ol>
<li id="fn-1">
<p>The mapping from a tuple &ldquo;(event, channels)&rdquo; to the
handlers is evaluated once for a new tuple and then cached. So once the
cache has been filled, event processing imposes only a relatively
small constant overhead over invoking methods directly. The cache is
cleared if the handlers are removed or added. Therefore, frequent
changes of the applications structure whie running it should be
avoided.</p>
<a href="#fnref-1" class="footnote-backref">&#8617;</a>
</li>
</ol>
</div>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div class="type-summary">
<table class="summary-table">
<caption><span>Interface Summary</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Interface</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="Associator.html" title="interface in org.jgrapes.core">Associator</a></th>
<td class="col-last">
<div class="block">Implemented by classes that allow arbitrary objects to be associated
with instances.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Channel.html" title="interface in org.jgrapes.core">Channel</a></th>
<td class="col-last">
<div class="block">Instances of this interface can be used as a communication
bus for sending events between components.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="Channel.Default.html" title="interface in org.jgrapes.core">Channel.Default</a></th>
<td class="col-last">
<div class="block">This interface&rsquo;s class can be used to specify the component&rsquo;s
channel (see <a href="Component.html#channel()"><code>Component.channel()</code></a>) as criterion in
handler annotations.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="ComponentFactory.html" title="interface in org.jgrapes.core">ComponentFactory</a></th>
<td class="col-last">
<div class="block">A general purpose factory interface for components.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="Components.IdInfoProvider.html" title="interface in org.jgrapes.core">Components.IdInfoProvider</a></th>
<td class="col-last">
<div class="block">Implemented by classes that want a special class (scope) to be used
for looking up their id or want to map to another object for getting the
id (see <a href="Components.html#objectId(java.lang.Object)"><code>Components.objectId(Object)</code></a>).</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Components.TimeoutHandler.html" title="interface in org.jgrapes.core">Components.TimeoutHandler</a></th>
<td class="col-last">
<div class="block">Instances are added to the scheduler in order to be invoked
at a given time.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="ComponentType.html" title="interface in org.jgrapes.core">ComponentType</a></th>
<td class="col-last">
<div class="block">This interface marks a class as a component.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Eligible.html" title="interface in org.jgrapes.core">Eligible</a></th>
<td class="col-last">
<div class="block">This interface provides a mechanism for matching objects, using
a filter on the object&rsquo;s &ldquo;kind&rdquo; as criterion.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="EventPipeline.html" title="interface in org.jgrapes.core">EventPipeline</a></th>
<td class="col-last">
<div class="block">An interface that describes a queue of events that are sent to the components
of the associated tree.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="HandlerScope.html" title="interface in org.jgrapes.core">HandlerScope</a></th>
<td class="col-last">
<div class="block">This interface allows to verify whether a given
event fired on one of the given channels is handled by a handler.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="InvocationFilter.html" title="interface in org.jgrapes.core">InvocationFilter</a></th>
<td class="col-last">
<div class="block">Some <a href="HandlerScope.html" title="interface in org.jgrapes.core"><code>HandlerScope</code></a> implementations use only a subset of the
properties of the events passed to
<a href="HandlerScope.html#includes(org.jgrapes.core.Eligible,org.jgrapes.core.Eligible%5B%5D)"><code>HandlerScope.includes(Eligible, Eligible[])</code></a> for
evaluating the result.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Manager.html" title="interface in org.jgrapes.core">Manager</a></th>
<td class="col-last">
<div class="block">The interface that provides the methods for manipulating the
component and the component&rsquo;s hierarchy and for firing events.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="Self.html" title="interface in org.jgrapes.core">Self</a></th>
<td class="col-last">
<div class="block">This interface type can be used to specify the object
itself as channel in handler annotations.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Subchannel.html" title="interface in org.jgrapes.core">Subchannel</a></th>
<td class="col-last">
<div class="block">Represents a subchannel.</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
<li>
<div class="type-summary">
<table class="summary-table">
<caption><span>Class Summary</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Class</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="ClassChannel.html" title="class in org.jgrapes.core">ClassChannel</a></th>
<td class="col-last">
<div class="block">This class is the root base class for channels that use their class (type)
as value for matching (see <a href="Eligible.html" title="interface in org.jgrapes.core"><code>Eligible</code></a>).</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="CompletionEvent.html" title="class in org.jgrapes.core">CompletionEvent</a>&lt;T extends <a href="Event.html" title="class in org.jgrapes.core">Event</a>&lt;?&gt;&gt;</th>
<td class="col-last">
<div class="block">A base class for completion events that use the completed event
as their result type.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="CompletionLock.html" title="class in org.jgrapes.core">CompletionLock</a></th>
<td class="col-last">
<div class="block">Represents a lock that prevents sending completion events.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Component.html" title="class in org.jgrapes.core">Component</a></th>
<td class="col-last">
<div class="block">This class can be used as base class for implementing a component.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="ComponentCollector.html" title="class in org.jgrapes.core">ComponentCollector</a>&lt;F extends <a href="ComponentFactory.html" title="interface in org.jgrapes.core">ComponentFactory</a>&gt;</th>
<td class="col-last">Deprecated.
<div class="deprecation-comment">This class has been moved to
<a href="../util/ComponentCollector.html" title="class in org.jgrapes.util"><code>ComponentCollector</code></a>.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Components.html" title="class in org.jgrapes.core">Components</a></th>
<td class="col-last">
<div class="block">This class provides some utility functions.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="Components.PoolingIndex.html" title="class in org.jgrapes.core">Components.PoolingIndex</a>&lt;K,&#8203;V&gt;</th>
<td class="col-last">
<div class="block">An index of pooled items.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Components.Timer.html" title="class in org.jgrapes.core">Components.Timer</a></th>
<td class="col-last">
<div class="block">Represents a timer as created by
<a href="Components.html#schedule(org.jgrapes.core.Components.TimeoutHandler,java.time.Instant)"><code>Components.schedule(TimeoutHandler, Instant)</code></a>.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="Event.html" title="class in org.jgrapes.core">Event</a>&lt;T&gt;</th>
<td class="col-last">
<div class="block">This class is the base class for all events.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="NamedChannel.html" title="class in org.jgrapes.core">NamedChannel</a></th>
<td class="col-last">
<div class="block">This class provides channels that are identified by a name
(<code>string</code>).</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="NamedEvent.html" title="class in org.jgrapes.core">NamedEvent</a>&lt;T&gt;</th>
<td class="col-last">
<div class="block">A class for events using a simple name as the event&rsquo;s kind.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-first" scope="row"><a href="Subchannel.DefaultSubchannel.html" title="class in org.jgrapes.core">Subchannel.DefaultSubchannel</a></th>
<td class="col-last">
<div class="block">A simple implementation of <a href="Subchannel.html" title="interface in org.jgrapes.core"><code>Subchannel</code></a>.</div>
</td>
</tr>
<tr class="alt-color">
<th class="col-first" scope="row"><a href="TypedIdKey.html" title="class in org.jgrapes.core">TypedIdKey</a>&lt;V&gt;</th>
<td class="col-last">
<div class="block">Combines a type and an id value to a key for an <a href="Associator.html" title="interface in org.jgrapes.core"><code>Associator</code></a>
or <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link"><code>Map</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="about-language"><script type="text/javascript" charset="utf-8" src="../../../highlight.pack.js"></script>
<script type="text/javascript"><!--
var cssId = 'highlightCss';
if (!document.getElementById(cssId))
{
    var head  = document.getElementsByTagName('head')[0];
    var link  = document.createElement('link');
    link.id   = cssId;
    link.rel  = 'stylesheet';
    link.type = 'text/css';
    link.charset = 'utf-8';
    link.href = '../../../highlight.css';
    link.media = 'all';
    head.appendChild(link);
}hljs.initHighlightingOnLoad();
//--></script></div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small><div>
    <!-- Optional footer data -->
    <p id=githubfooter style="padding: 5px 6px; visibility: hidden">Hosted on GitHub Pages &mdash; 
    <a href="https://github.com/site/terms" target="_top">Terms</a>
    &mdash; <a href="https://github.com/site/privacy" target="_top">Privacy</a></p>
    <script type="text/javascript">
    if (location.hostname.indexOf("github") !== -1) {
        document.getElementById("githubfooter").style.visibility="visible";
    }
    </script>
    <noscript>
        <div>JavaScript is disabled on your browser, terms and privacy links may not be shown correctly.</div>
    </noscript>
</div></small></p>
</footer>
</div>
</div>
</body>
</html>
