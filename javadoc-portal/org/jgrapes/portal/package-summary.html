<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (1.8.0_151) on Fri Jan 05 23:41:05 CET 2018 -->
<title>org.jgrapes.portal (JGrapes-Portal API)</title>
<meta name="date" content="2018-01-05">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.jgrapes.portal (JGrapes-Portal API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../org/jgrapes/portal/demo/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jgrapes/portal/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<p>@Version(value="${api_version}")
</p>
<h1 title="Package" class="title">Package&nbsp;org.jgrapes.portal</h1>
<div class="docSummary">
<div class="block">Provides the components for building a portal based on the
core, io and http packages.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/Portal.ManagedPortalMXBean.html" title="interface in org.jgrapes.portal">Portal.ManagedPortalMXBean</a></td>
<td class="colLast">
<div class="block">An MBean interface for the portal component.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/Portlet.html" title="interface in org.jgrapes.portal">Portlet</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/RenderSupport.html" title="interface in org.jgrapes.portal">RenderSupport</a></td>
<td class="colLast">
<div class="block">Provides support for creating URIs in the portal scope that
are forwarded to components listening on the portal channel.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/UserPrincipal.html" title="interface in org.jgrapes.portal">UserPrincipal</a></td>
<td class="colLast">
<div class="block">A principal representing an identity established by a client.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/AbstractPortlet.html" title="class in org.jgrapes.portal">AbstractPortlet</a></td>
<td class="colLast">
<div class="block">Provides a base class for implementing portlet components that
maintain the portlet&rsquo;s state in the browser session.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/AbstractPortlet.PortletBaseModel.html" title="class in org.jgrapes.portal">AbstractPortlet.PortletBaseModel</a></td>
<td class="colLast">
<div class="block">Defines the portlet model following the JavaBean conventions.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/KVStoreBasedPortalPolicy.html" title="class in org.jgrapes.portal">KVStoreBasedPortalPolicy</a></td>
<td class="colLast">
<div class="block">A component that restores the portal layout,
using key/value events for persisting the data between sessions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/PageResourceProvider.html" title="class in org.jgrapes.portal">PageResourceProvider</a></td>
<td class="colLast">
<div class="block">Base class for implementing components that add resources to
the <code>&lt;HEAD&gt;</code> section of the portal page.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/Portal.html" title="class in org.jgrapes.portal">Portal</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/PortalLocalBackedKVStore.html" title="class in org.jgrapes.portal">PortalLocalBackedKVStore</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a></td>
<td class="colLast">
<div class="block">The server side representation of a window in the browser
that displays a portal page (a portal session).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/PortalView.html" title="class in org.jgrapes.portal">PortalView</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/PortalView.LanguageInfo.html" title="class in org.jgrapes.portal">PortalView.LanguageInfo</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/PortalView.ThemeInfo.html" title="class in org.jgrapes.portal">PortalView.ThemeInfo</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/ThemeProvider.html" title="class in org.jgrapes.portal">ThemeProvider</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/Utils.html" title="class in org.jgrapes.portal">Utils</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/Portlet.RenderMode.html" title="enum in org.jgrapes.portal">Portlet.RenderMode</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/jgrapes/portal/ResourceNotFoundException.html" title="class in org.jgrapes.portal">ResourceNotFoundException</a></td>
<td class="colLast">
<div class="block">Thrown if a resource cannot be found.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.jgrapes.portal Description">Package org.jgrapes.portal Description</h2>
<div class="block"><p>Provides the components for building a portal based on the
core, io and http packages.</p>
<ul>
<li><a href="#portal-and-portalview">Portal and PortalView</a></li>
<li><a href="#page-resource-providers">Page resource providers</a></li>
<li><a href="#portlets">Portlets</a></li>
<li><a href="#portal-policies">Portal Policies</a></li>
<li><a href="#data-exchange">Data exchange</a></li>
<li><a href="#boot-sequence">Boot sequence</a></li>
</ul>
<h2><a href="#portal-and-portalview" id="portal-and-portalview">Portal and PortalView</a></h2>
<p>The <a href="../../../org/jgrapes/portal/Portal.html" title="class in org.jgrapes.portal"><code>Portal</code></a> component
is conceptually the main component of the portal. It exchanges events
with the portlets and helper components, using a channel that is
independent of the  channel used for the communication with the browser.</p>
<p>When created, a <a href="../../../org/jgrapes/portal/Portal.html" title="class in org.jgrapes.portal"><code>Portal</code></a> component automatically
instantiates a child component of type <a href="../../../org/jgrapes/portal/PortalView.html" title="class in org.jgrapes.portal"><code>PortalView</code></a>
which handles the communication with the browser. You can think of the
<a href="../../../org/jgrapes/portal/PortalView.html" title="class in org.jgrapes.portal"><code>PortalView</code></a>/<a href="../../../org/jgrapes/portal/Portal.html" title="class in org.jgrapes.portal"><code>Portal</code></a>
pair as a gateway that translates the Input/Output related events on the
HTTP/WebSocket side to portal/portlet related events on the portlet side and
vice versa.</p>
<p><img src="PortalStructure.svg" alt="Portal Structure" /></p>
<p>In the browser, the portal is implemented as a single page
application. The <a href="../../../org/jgrapes/portal/PortalView.html" title="class in org.jgrapes.portal"><code>PortalView</code></a> provides
an initial HTML document that implements the basic structure of
the portal. Aside from additional HTTP requests for static resources
like JavaScript libraries, CSS, images etc. all information is
then exchanged using a web socket connection that is established
immediately after the initial HTML has been loaded.</p>
<h2><a href="#page-resource-providers" id="page-resource-providers">Page resource providers</a></h2>
<p>The initial HTML document already includes some JavaScript resources
like <a href="http://jquery.com/" target="_top">jQuery</a> and <a href="http://jqueryui.com/" target="_top">jQuery-UI</a>.
The portlets may, however, require additional libraries in order to
work. While it is possible for the portlets to add libraries, it is
usually preferable to add such libraries independent from individual
portlets in order to avoid duplicate loading and version conflicts.
This is done by <a href="../../../org/jgrapes/portal/PageResourceProvider.html" title="class in org.jgrapes.portal"><code>PageResourceProvider</code></a>s
that issue <a href="../../../org/jgrapes/portal/events/AddPageResources.html" title="class in org.jgrapes.portal.events"><code>AddPageResources</code></a> events
on startup. See the event&rsquo;s description for details.</p>
<h2><a href="#portlets" id="portlets">Portlets</a></h2>
<p>Portlet components represent available portlet types. If a
portlet is actually used (instantiated) in the portal, and state
is associated with this instance or instances have to be tracked,
the portlet has to create and maintain a server side representation
of the instance. How this is done is completely up to the portlet.
A common approach, which is supported by the portlet base class
<a href="../../../org/jgrapes/portal/AbstractPortlet.html" title="class in org.jgrapes.portal"><code>AbstractPortlet</code></a>, is shown in the
diagram above.</p>
<p>Using this approach, the portlet creates a portlet data object
for each instance as an item stored in the browser session. This
couples the lifetime of the portlet data instances with the
lifetime of the general session data, which is what you&rsquo;d
usually expect. Note that the portal data object is conceptually
a view of some model maintained elsewhere. If the state information
associated with this view (e.g. columns displayed or hidden in
a table representation) needs to be persisted across
sessions, it&rsquo;s up to the portlet to provide a persistence mechanism.</p>
<h2><a href="#portal-policies" id="portal-policies">Portal Policies</a></h2>
<p>Portal policy components are responsible for establishing the initial
set of portlets shown after the portal page has loaded. Usually,
there will be a portal policy component that restores the layout from the
previous session. <a href="../../../org/jgrapes/portal/KVStoreBasedPortalPolicy.html" title="class in org.jgrapes.portal"><code>KVStoreBasedPortalPolicy</code></a>
is an example of such a component.</p>
<p>There can be more than one portal policy component. A common use case
is to have one policy component that maintains the portal layout
and another component that ensures that the portal is not empty when
a new session is initially created. The demo includes such a component.</p>
<h2><a href="#data-exchange" id="data-exchange">Data exchange</a></h2>
<p>The following diagram shows the start of the
portal bootstrap to the first JSON messages.</p>
<p><img src="PortalBootSeq.svg" alt="Boot Event Sequence" /></p>
<p>After the portal page has loaded and the web socket connection has been
established, all information is exchanged using
<a href="http://www.jsonrpc.org/specification#notification" target="_top">JSON RPC notifications</a>.
The <a href="../../../org/jgrapes/portal/PortalView.html" title="class in org.jgrapes.portal"><code>PortalView</code></a> processes
<code>Input</code> events with serialized JSON RPC
data from the web socket channel until the complete JSON RPC notification
has been received. The notification
(a <a href="../../../org/jgrapes/portal/events/JsonInput.html" title="class in org.jgrapes.portal.events"><code>JsonInput</code></a> from the servers point
of view) is then fired on the associated
<a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal"><code>PortalSession</code></a> channel, which allows it to
be intercepted by additional components. Usually, however, it is
handled by the <a href="../../../org/jgrapes/portal/Portal.html" title="class in org.jgrapes.portal"><code>Portal</code></a> that converts it
to a higher level event that is again fired on the
<a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal"><code>PortalSession</code></a> channel.</p>
<p>Components such as portlets or portal policies respond by sending
higher level events on the <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal"><code>PortalSession</code></a>
channel. These events are handled by the portal which converts them
to <a href="../../../org/jgrapes/portal/events/JsonOutput.html" title="class in org.jgrapes.portal.events"><code>JsonOutput</code></a> events. These are
processed by the <a href="../../../org/jgrapes/portal/PortalView.html" title="class in org.jgrapes.portal"><code>PortalView</code></a> which
serializes the data and sends it to the websocket using
<code>Output</code> events.</p>
<h2><a href="#boot-sequence" id="boot-sequence">Boot sequence</a></h2>
<p>The diagram below shows the complete mandatory sequence of events
following the portal ready message. The diagram uses a
simplified version of the sequence diagram that combines the
<a href="../../../org/jgrapes/portal/PortalView.html" title="class in org.jgrapes.portal"><code>PortalView</code></a> and the
<a href="../../../org/jgrapes/portal/Portal.html" title="class in org.jgrapes.portal"><code>Portal</code></a> into a single object and leaves out the
details about the JSON serialization/deserialization.</p>
<p><img src="PortalReadySeq.svg" alt="Portal Ready Event Sequence" /></p>
<p>The remaining part of this section provides an overview of the boot
sequence. Detailed information about the purpose and handling of the
different events can be found in their respective JavaDoc or in the
documentation of the components that handle them. Note that the more
detailed descriptions use the simplified version of the sequence
diagram as well.</p>
<p>The boot sequence starts with
<a href="../../../org/jgrapes/portal/events/AddPortletType.html" title="class in org.jgrapes.portal.events"><code>AddPortletType</code></a> events fired
by the portlets in response to the
<a href="../../../org/jgrapes/portal/events/PortalReady.html" title="class in org.jgrapes.portal.events"><code>PortalReady</code></a> event. These cause the
portal page in the browser to register the portlet type in the
portal&rsquo;s menu of instantiable portlets and to load any additionally
required resources.</p>
<p>When all <a href="../../../org/jgrapes/portal/events/AddPortletType.html" title="class in org.jgrapes.portal.events"><code>AddPortletType</code></a> events have
been processed, the portal is considered ready for usage and a
<a href="../../../org/jgrapes/portal/events/PortalPrepared.html" title="class in org.jgrapes.portal.events"><code>PortalPrepared</code></a> event is generated
(by the framework as <code>CompletionEvent</code> of the
<a href="../../../org/jgrapes/portal/events/PortalReady.html" title="class in org.jgrapes.portal.events"><code>PortalReady</code></a> event). This causes
the portal policy to send the last known layout to the portal page
in the browser and to send
<a href="../../../org/jgrapes/portal/events/RenderPortletRequest.html" title="class in org.jgrapes.portal.events"><code>RenderPortletRequest</code></a> events to
the portlets. These are the same events as those sent by the browser
when the user adds a new portlet instance to the portal page.</p>
<p>As completion event of the <a href="../../../org/jgrapes/portal/events/PortalPrepared.html" title="class in org.jgrapes.portal.events"><code>PortalPrepared</code></a>
event, the framework generates a
<a href="../../../org/jgrapes/portal/events/PortalConfigured.html" title="class in org.jgrapes.portal.events"><code>PortalConfigured</code></a> event which is sent to
the portal, indicating that it is now ready for use.</p></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><script type="text/javascript" charset="utf-8" src="../../../highlight.pack.js"></script>
<script type="text/javascript"><!--
var cssId = 'highlightCss';
if (!document.getElementById(cssId))
{
    var head  = document.getElementsByTagName('head')[0];
    var link  = document.createElement('link');
    link.id   = cssId;
    link.rel  = 'stylesheet';
    link.type = 'text/css';
    link.charset = 'utf-8';
    link.href = '../../../highlight.css';
    link.media = 'all';
    head.appendChild(link);
}hljs.initHighlightingOnLoad();
//--></script></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../org/jgrapes/portal/demo/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jgrapes/portal/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["setDomains", ["*.mnlipp.github.io"]]);
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);
  (function() {
    var u="//piwik.mnl.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "10"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
    g.type="text/javascript"; g.async=true; g.defer=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.mnl.de/piwik.php?idsite=10" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code --></small></p>
</body>
</html>
