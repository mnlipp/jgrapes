<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="388px" preserveAspectRatio="none" style="width:566px;height:388px;" version="1.1" viewBox="0 0 566 388" width="566px" zoomAndPan="magnify"><defs><filter height="300%" id="fb4wj60arfhkt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster org.jgrapes.http--><polygon fill="#FFFFFF" filter="url(#fb4wj60arfhkt)" points="256.25,24,390.25,24,397.25,46.2969,401.25,46.2969,401.25,124,256.25,124,256.25,24" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="256.25" x2="397.25" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="260.25" y="38.9951">org.jgrapes.http</text><!--class Session--><rect fill="#FEFECE" filter="url(#fb4wj60arfhkt)" height="48" id="Session" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="275" y="60"/><ellipse cx="290" cy="76" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M292.9688,81.6406 Q292.3906,81.9375 291.75,82.0859 Q291.1094,82.2344 290.4063,82.2344 Q287.9063,82.2344 286.5859,80.5859 Q285.2656,78.9375 285.2656,75.8125 Q285.2656,72.6875 286.5859,71.0313 Q287.9063,69.375 290.4063,69.375 Q291.1094,69.375 291.7578,69.5313 Q292.4063,69.6875 292.9688,69.9844 L292.9688,72.7031 Q292.3438,72.125 291.75,71.8516 Q291.1563,71.5781 290.5313,71.5781 Q289.1875,71.5781 288.5,72.6484 Q287.8125,73.7188 287.8125,75.8125 Q287.8125,77.9063 288.5,78.9766 Q289.1875,80.0469 290.5313,80.0469 Q291.1563,80.0469 291.75,79.7734 Q292.3438,79.5 292.9688,78.9219 L292.9688,81.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="304" y="80.1543">Session</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="276" x2="355" y1="92" y2="92"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="276" x2="355" y1="100" y2="100"/><!--class PortalSession--><rect fill="#FEFECE" filter="url(#fb4wj60arfhkt)" height="188.8516" id="PortalSession" style="stroke: #A80036; stroke-width: 1.5;" width="445" x="6" y="188.5"/><ellipse cx="181.25" cy="204.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M184.2188,210.1406 Q183.6406,210.4375 183,210.5859 Q182.3594,210.7344 181.6563,210.7344 Q179.1563,210.7344 177.8359,209.0859 Q176.5156,207.4375 176.5156,204.3125 Q176.5156,201.1875 177.8359,199.5313 Q179.1563,197.875 181.6563,197.875 Q182.3594,197.875 183.0078,198.0313 Q183.6563,198.1875 184.2188,198.4844 L184.2188,201.2031 Q183.5938,200.625 183,200.3516 Q182.4063,200.0781 181.7813,200.0781 Q180.4375,200.0781 179.75,201.1484 Q179.0625,202.2188 179.0625,204.3125 Q179.0625,206.4063 179.75,207.4766 Q180.4375,208.5469 181.7813,208.5469 Q182.4063,208.5469 183,208.2734 Q183.5938,208 184.2188,207.4219 L184.2188,210.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="201.75" y="208.6543">PortalSession</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="450" y1="220.5" y2="220.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="229.4023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="248" x="26" y="234.7104">Map&lt;String,PortalSession&gt; portalSessions</text><line style="stroke: #000000; stroke-width: 1.0;" x1="26" x2="274" y1="236.7104" y2="236.7104"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="450" y1="241.3047" y2="241.3047"/><ellipse cx="17" cy="253.207" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="419" x="26" y="255.5151">findOrCreate(String portalSessionId, Manager component): PortalSession</text><line style="stroke: #000000; stroke-width: 1.0;" x1="26" x2="445" y1="257.5151" y2="257.5151"/><ellipse cx="17" cy="266.0117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="234" x="26" y="268.3198">setTimeout(timeout: long): PortalSession</text><ellipse cx="17" cy="278.8164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="26" y="281.1245">refresh(): void</text><ellipse cx="17" cy="291.6211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="398" x="26" y="293.9292">setUpstreamChannel(IOSubchannel upstreamChannel): PortalSession</text><ellipse cx="17" cy="304.4258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="302" x="26" y="306.7339">setSession(Session browserSession): PortalSession</text><ellipse cx="17" cy="317.2305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="260" x="26" y="319.5386">upstreamChannel(): Optional&lt;IOSubchannel&gt;</text><ellipse cx="17" cy="330.0352" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="26" y="332.3433">portalSessionId(): String</text><ellipse cx="17" cy="342.8398" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="26" y="345.1479">browserSession(): Session</text><ellipse cx="17" cy="355.6445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="26" y="357.9526">locale(): Locale</text><ellipse cx="17" cy="368.4492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="26" y="370.7573">setLocale(Locale locale): void</text><!--class IOSubchannel--><rect fill="#FEFECE" filter="url(#fb4wj60arfhkt)" height="48" id="IOSubchannel" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="121.25" y="60"/><ellipse cx="136.25" cy="76" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M132.1719,71.7656 L132.1719,69.6094 L139.5625,69.6094 L139.5625,71.7656 L137.0938,71.7656 L137.0938,79.8438 L139.5625,79.8438 L139.5625,82 L132.1719,82 L132.1719,79.8438 L134.6406,79.8438 L134.6406,71.7656 L132.1719,71.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="86" x="150.25" y="80.1543">IOSubchannel</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="122.25" x2="238.25" y1="92" y2="92"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="122.25" x2="238.25" y1="100" y2="100"/><!--link IOSubchannel to PortalSession--><path d="M190.723,127.981 C195.045,145.719 200.236,167.025 205.359,188.053 " fill="none" id="IOSubchannel-PortalSession" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="183.878,129.461,185.945,108.372,197.48,126.146,183.878,129.461" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PortalSession to PortalSession--><path d="M463.448,265.856 C477.093,269.976 485.25,275.69 485.25,283 C485.25,292.3564 471.885,299.0997 450.754,303.2297 " fill="none" id="PortalSession-PortalSession" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="450.754,262.77,455.639,268.0744,462.4142,265.6053,457.5292,260.3009,450.754,262.77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="491.25" y="287.0669">maintains</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="458.885" y="257.8095">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="458.867" y="299.7232">*</text><!--link Session to PortalSession--><path d="M302.892,112.983 C294.133,132.817 281.832,160.67 269.739,188.053 " fill="none" id="Session-PortalSession" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="304.928,108.372,297.6332,114.9891,302.9082,112.9459,304.9514,118.2208,304.928,108.372" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="290.25" y="153.0669">browser session</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="292.1323" y="128.2239">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="264.0926" y="177.5018">*</text><!--
@startuml
class PortalSession {
	-{static}Map<String,PortalSession> portalSessions
	+{static}findOrCreate(String portalSessionId, Manager component): PortalSession
  +setTimeout(timeout: long): PortalSession
  +refresh(): void
	+setUpstreamChannel(IOSubchannel upstreamChannel): PortalSession
	+setSession(Session browserSession): PortalSession
	+upstreamChannel(): Optional<IOSubchannel>
	+portalSessionId(): String
	+browserSession(): Session
	+locale(): Locale
	+setLocale(Locale locale): void
 }
 Interface IOSubchannel {
 }
 IOSubchannel <|.. PortalSession

 PortalSession "1" *- - "*" PortalSession : maintains
 
 package org.jgrapes.http {
     class Session
 }
 
 PortalSession "*" -up-> "1" Session: browser session
@enduml

PlantUML version 1.2017.18(Fri Oct 06 16:56:32 UTC 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Linux
OS Version: 4.4.0-112-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>