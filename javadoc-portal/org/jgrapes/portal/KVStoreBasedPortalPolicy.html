<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (1.8.0_151) on Wed Jan 03 21:28:56 CET 2018 -->
<title>KVStoreBasedPortalPolicy (JGrapes-Portal API)</title>
<meta name="date" content="2018-01-03">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="KVStoreBasedPortalPolicy (JGrapes-Portal API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KVStoreBasedPortalPolicy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jgrapes/portal/AbstractPortlet.PortletBaseModel.html" title="class in org.jgrapes.portal"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/jgrapes/portal/PageResourceProvider.html" title="class in org.jgrapes.portal"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jgrapes/portal/KVStoreBasedPortalPolicy.html" target="_top">Frames</a></li>
<li><a href="KVStoreBasedPortalPolicy.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jgrapes.portal</div>
<h2 title="Class KVStoreBasedPortalPolicy" class="title">Class KVStoreBasedPortalPolicy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.jgrapes.core.internal.ComponentVertex</li>
<li>
<ul class="inheritance">
<li>org.jgrapes.core.Component</li>
<li>
<ul class="inheritance">
<li>org.jgrapes.portal.KVStoreBasedPortalPolicy</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Iterable&lt;org.jgrapes.core.ComponentType&gt;, org.jgrapes.core.Channel, org.jgrapes.core.ComponentType, org.jgrapes.core.Eligible, org.jgrapes.core.Manager</dd>
</dl>
<hr>
<br>
<pre>public class <a href="../../../src-html/org/jgrapes/portal/KVStoreBasedPortalPolicy.html#line.109">KVStoreBasedPortalPolicy</a>
extends org.jgrapes.core.Component</pre>
<div class="block"><p>A component that restores the portal layout,
using key/value events for persisting the data between sessions.</p>
<p><img src="KVPPBootSeq.svg" alt="Boot Event Sequence" /></p>
<p>This component requires another component that handles the key/value
store events (<code>KeyValueStoreUpdate</code>, <code>KeyValueStoreQuery</code>)
used by this component for implementing persistence. When the portal becomes
ready, this policy sends a query for the persisted data. To ensure
that the data is available before the boot sequence continues, the
completion of the <a href="../../../org/jgrapes/portal/events/PortalReady.html" title="class in org.jgrapes.portal.events"><code>PortalReady</code></a> event is delayed (using a
<code>CompletionLock</code>) until the requested data becomes available.</p>
<p>When the portal has been prepared, the policy sends the last layout
as retrieved from persistent storage to the portal and then generates
render events for all portlets contained in this layout.</p>
<p>Each time the layout is changed in the portal, the portal sends the
new layout data and this component updates the persistent storage
accordingly.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.jgrapes.core.Channel">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.jgrapes.core.Channel</h3>
<code>BROADCAST, SELF</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/jgrapes/portal/KVStoreBasedPortalPolicy.html#KVStoreBasedPortalPolicy--">KVStoreBasedPortalPolicy</a></span>()</code>
<div class="block">Creates a new component with its channel set to
itself.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/jgrapes/portal/KVStoreBasedPortalPolicy.html#KVStoreBasedPortalPolicy-org.jgrapes.core.Channel-">KVStoreBasedPortalPolicy</a></span>(org.jgrapes.core.Channel&nbsp;componentChannel)</code>
<div class="block">Creates a new component with its channel set to the given channel.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/jgrapes/portal/KVStoreBasedPortalPolicy.html#onKeyValueStoreData-org.jgrapes.util.events.KeyValueStoreData-org.jgrapes.portal.PortalSession-">onKeyValueStoreData</a></span>(org.jgrapes.util.events.KeyValueStoreData&nbsp;event,
                   <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a>&nbsp;channel)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/jgrapes/portal/KVStoreBasedPortalPolicy.html#onPortalLayoutChanged-org.jgrapes.portal.events.PortalLayoutChanged-org.jgrapes.portal.PortalSession-">onPortalLayoutChanged</a></span>(<a href="../../../org/jgrapes/portal/events/PortalLayoutChanged.html" title="class in org.jgrapes.portal.events">PortalLayoutChanged</a>&nbsp;event,
                     <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a>&nbsp;channel)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/jgrapes/portal/KVStoreBasedPortalPolicy.html#onPortalPrepared-org.jgrapes.portal.events.PortalPrepared-org.jgrapes.portal.PortalSession-">onPortalPrepared</a></span>(<a href="../../../org/jgrapes/portal/events/PortalPrepared.html" title="class in org.jgrapes.portal.events">PortalPrepared</a>&nbsp;event,
                <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a>&nbsp;channel)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/jgrapes/portal/KVStoreBasedPortalPolicy.html#onPortalReady-org.jgrapes.portal.events.PortalReady-org.jgrapes.portal.PortalSession-">onPortalReady</a></span>(<a href="../../../org/jgrapes/portal/events/PortalReady.html" title="class in org.jgrapes.portal.events">PortalReady</a>&nbsp;event,
             <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a>&nbsp;channel)</code>
<div class="block">Intercept the <a href="../../../org/jgrapes/portal/events/PortalReady.html" title="class in org.jgrapes.portal.events"><code>PortalReady</code></a> event.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.jgrapes.core.Component">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.jgrapes.core.Component</h3>
<code>channel, component, defaultCriterion, isEligibleFor</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.jgrapes.core.internal.ComponentVertex">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.jgrapes.core.internal.ComponentVertex</h3>
<code>activeEventPipeline, addHandler, attach, children, componentVertex, detach, fire, initComponentsHandlers, iterator, newEventPipeline, newEventPipeline, newSyncEventPipeline, parent, registerAsGenerator, root, toString, unregisterAsGenerator</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.jgrapes.core.Channel">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.jgrapes.core.Channel</h3>
<code>criterionToString, toString, toString</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Iterable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.lang.Iterable</h3>
<code>forEach, spliterator</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="KVStoreBasedPortalPolicy--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>KVStoreBasedPortalPolicy</h4>
<pre>public&nbsp;<a href="../../../src-html/org/jgrapes/portal/KVStoreBasedPortalPolicy.html#line.115">KVStoreBasedPortalPolicy</a>()</pre>
<div class="block"><p>Creates a new component with its channel set to
itself.</p></div>
</li>
</ul>
<a name="KVStoreBasedPortalPolicy-org.jgrapes.core.Channel-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>KVStoreBasedPortalPolicy</h4>
<pre>public&nbsp;<a href="../../../src-html/org/jgrapes/portal/KVStoreBasedPortalPolicy.html#line.123">KVStoreBasedPortalPolicy</a>(org.jgrapes.core.Channel&nbsp;componentChannel)</pre>
<div class="block"><p>Creates a new component with its channel set to the given channel.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>componentChannel</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="onPortalReady-org.jgrapes.portal.events.PortalReady-org.jgrapes.portal.PortalSession-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onPortalReady</h4>
<pre>@Handler
public&nbsp;void&nbsp;<a href="../../../src-html/org/jgrapes/portal/KVStoreBasedPortalPolicy.html#line.136">onPortalReady</a>(<a href="../../../org/jgrapes/portal/events/PortalReady.html" title="class in org.jgrapes.portal.events">PortalReady</a>&nbsp;event,
                                   <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a>&nbsp;channel)
                            throws java.lang.InterruptedException</pre>
<div class="block"><p>Intercept the <a href="../../../org/jgrapes/portal/events/PortalReady.html" title="class in org.jgrapes.portal.events"><code>PortalReady</code></a> event. Request the
session data from the key/value store and resume.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - </dd>
<dd><code>channel</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code></dd>
</dl>
</li>
</ul>
<a name="onKeyValueStoreData-org.jgrapes.util.events.KeyValueStoreData-org.jgrapes.portal.PortalSession-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onKeyValueStoreData</h4>
<pre>@Handler
public&nbsp;void&nbsp;<a href="../../../src-html/org/jgrapes/portal/KVStoreBasedPortalPolicy.html#line.145">onKeyValueStoreData</a>(org.jgrapes.util.events.KeyValueStoreData&nbsp;event,
                                         <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a>&nbsp;channel)
                                  throws org.jdrupes.json.JsonDecodeException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.jdrupes.json.JsonDecodeException</code></dd>
</dl>
</li>
</ul>
<a name="onPortalPrepared-org.jgrapes.portal.events.PortalPrepared-org.jgrapes.portal.PortalSession-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onPortalPrepared</h4>
<pre>@Handler
public&nbsp;void&nbsp;<a href="../../../src-html/org/jgrapes/portal/KVStoreBasedPortalPolicy.html#line.156">onPortalPrepared</a>(<a href="../../../org/jgrapes/portal/events/PortalPrepared.html" title="class in org.jgrapes.portal.events">PortalPrepared</a>&nbsp;event,
                                      <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a>&nbsp;channel)</pre>
</li>
</ul>
<a name="onPortalLayoutChanged-org.jgrapes.portal.events.PortalLayoutChanged-org.jgrapes.portal.PortalSession-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onPortalLayoutChanged</h4>
<pre>@Handler
public&nbsp;void&nbsp;<a href="../../../src-html/org/jgrapes/portal/KVStoreBasedPortalPolicy.html#line.163">onPortalLayoutChanged</a>(<a href="../../../org/jgrapes/portal/events/PortalLayoutChanged.html" title="class in org.jgrapes.portal.events">PortalLayoutChanged</a>&nbsp;event,
                                           <a href="../../../org/jgrapes/portal/PortalSession.html" title="class in org.jgrapes.portal">PortalSession</a>&nbsp;channel)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KVStoreBasedPortalPolicy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><script type="text/javascript" charset="utf-8" src="../../../highlight.pack.js"></script>
<script type="text/javascript"><!--
var cssId = 'highlightCss';
if (!document.getElementById(cssId))
{
    var head  = document.getElementsByTagName('head')[0];
    var link  = document.createElement('link');
    link.id   = cssId;
    link.rel  = 'stylesheet';
    link.type = 'text/css';
    link.charset = 'utf-8';
    link.href = '../../../highlight.css';
    link.media = 'all';
    head.appendChild(link);
}hljs.initHighlightingOnLoad();
//--></script></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jgrapes/portal/AbstractPortlet.PortletBaseModel.html" title="class in org.jgrapes.portal"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/jgrapes/portal/PageResourceProvider.html" title="class in org.jgrapes.portal"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jgrapes/portal/KVStoreBasedPortalPolicy.html" target="_top">Frames</a></li>
<li><a href="KVStoreBasedPortalPolicy.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["setDomains", ["*.mnlipp.github.io"]]);
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);
  (function() {
    var u="//piwik.mnl.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "10"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
    g.type="text/javascript"; g.async=true; g.defer=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.mnl.de/piwik.php?idsite=10" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code --></small></p>
</body>
</html>
